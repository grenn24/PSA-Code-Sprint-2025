{"version":3,"file":"cors.js","sourceRoot":"","sources":["../../middlewares/cors.ts"],"names":[],"mappings":"AAEA,kFAAkF;AAClF,MAAM,CAAC,OAAO,UAAU,IAAI,CAC3B,OAAgB,EAChB,QAAkB,EAClB,IAAkB;IAElB,MAAM,cAAc,GAAG;QACtB,uBAAuB;QACvB,kBAAkB;QAClB,yCAAyC;KACzC,CAAC;IAEF,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IACxC,IAAI,MAAM,IAAI,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;QAC/C,QAAQ,CAAC,SAAS,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;IAC3D,CAAC;IAED,QAAQ,CAAC,SAAS,CACjB,8BAA8B,EAC9B,iCAAiC,CACjC,CAAC;IACF,QAAQ,CAAC,SAAS,CACjB,8BAA8B,EAC9B,8DAA8D,CAC9D,CAAC;IACF,QAAQ,CAAC,SAAS,CAAC,+BAA+B,EAAE,gBAAgB,CAAC,CAAC;IACtE,QAAQ,CAAC,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC,CAAC;IAC/D,QAAQ,CAAC,SAAS,CAAC,wBAAwB,EAAE,SAAS,CAAC,CAAC;IAExD,2CAA2C;IAC3C,IAAI,OAAO,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;QAClC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IACD,IAAI,EAAE,CAAC;AACR,CAAC","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\n\r\n// Cors middleware for cross origin requests (backend server hosted independently)\r\nexport default function cors(\r\n\trequest: Request,\r\n\tresponse: Response,\r\n\tnext: NextFunction\r\n) {\r\n\tconst allowedOrigins = [\r\n\t\t\"http://localhost:5173\",\r\n\t\t\"http://localhost\",\r\n\t\t\"https://psa-code-sprint-2025.vercel.app\",\r\n\t];\r\n\r\n\tconst origin = request.header(\"Origin\");\r\n\tif (origin && allowedOrigins.includes(origin)) {\r\n\t\tresponse.setHeader(\"Access-Control-Allow-Origin\", origin);\r\n\t}\r\n\r\n\tresponse.setHeader(\r\n\t\t\"Access-Control-Allow-Methods\",\r\n\t\t\"GET, POST, PUT, DELETE, OPTIONS\"\r\n\t);\r\n\tresponse.setHeader(\r\n\t\t\"Access-Control-Allow-Headers\",\r\n\t\t\"Content-Type, X-Access-Token, Authorization, Accept-Language\"\r\n\t);\r\n\tresponse.setHeader(\"Access-Control-Expose-Headers\", \"X-Access-Token\");\r\n\tresponse.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\r\n\tresponse.setHeader(\"Access-Control-Max-Age\", \"1728000\");\r\n\r\n\t// Respond immediately for OPTIONS requests\r\n\tif (request.method === \"OPTIONS\") {\r\n\t\tresponse.sendStatus(204);\r\n\t}\r\n\tnext();\r\n}\r\n"]}