{"version":3,"file":"websocket.js","sourceRoot":"","sources":["../../routes/websocket.ts"],"names":[],"mappings":"AAEA,OAAO,mBAAmB,MAAM,6BAA6B,CAAC;AAE9D,SAAS,eAAe,CAAkB,UAAkB;IAC3D,MAAM,OAAO,GAAqB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IAEzD,QAAQ,OAAO,CAAC,IAAI,EAAE,CAAC;QACtB,KAAK,iBAAiB;YACrB,mBAAmB,CAAC,WAAW,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAC/C,MAAM;QAEP,KAAK,2BAA2B;YAC/B,mBAAmB,CAAC,oBAAoB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACxD,MAAM;QAEP,KAAK,iBAAiB;YACrB,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACpD,MAAM;QAEP,KAAK,qBAAqB;YACzB,mBAAmB,CAAC,kBAAkB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACtD,MAAM;QAEP,KAAK,mBAAmB;YACvB,mBAAmB,CAAC,YAAY,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAChD,MAAM;QAEP,KAAK,kBAAkB,CAAC;QACxB,KAAK,mBAAmB,CAAC;QACzB,KAAK,sBAAsB;YAC1B,mBAAmB,CAAC,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACnD,MAAM;IACR,CAAC;AACF,CAAC;AAED,eAAe,eAAe,CAAC","sourcesContent":["import { WebsocketMessage } from \"@common/types/http.js\";\r\nimport WebSocket from \"ws\";\r\nimport websocketController from \"../controllers/websocket.js\";\r\n\r\nfunction websocketRouter(this: WebSocket, rawMessage: string) {\r\n\tconst message: WebsocketMessage = JSON.parse(rawMessage);\r\n\r\n\tswitch (message.type) {\r\n\t\tcase \"wb_user_message\":\r\n\t\t\twebsocketController.postMessage(this, message);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"wb_user_message_stateless\":\r\n\t\t\twebsocketController.postMessageStateless(this, message);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"wb_mood_changes\":\r\n\t\t\twebsocketController.trackMoodChanges(this, message);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"wb_unbiased_opinion\":\r\n\t\t\twebsocketController.getUnbiasedOpinion(this, message);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"wb_daily_check_in\":\r\n\t\t\twebsocketController.dailyCheckIn(this, message);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"offer_video_call\":\r\n\t\tcase \"answer_video_call\":\r\n\t\tcase \"establish_connection\":\r\n\t\t\twebsocketController.handleVideoCall(this, message);\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nexport default websocketRouter;\r\n"]}