{"version":3,"file":"websocket.js","sourceRoot":"","sources":["../../routes/websocket.ts"],"names":[],"mappings":"AAEA,OAAO,mBAAmB,MAAM,6BAA6B,CAAC;AAE9D,SAAS,eAAe,CAAkB,UAAkB;IAC3D,MAAM,OAAO,GAAqB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACzD,IAAI,OAAO,CAAC,IAAI,KAAK,iBAAiB,EAAE,CAAC;QACxC,mBAAmB,CAAC,WAAW,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAChD,CAAC;IAED,IAAI,OAAO,CAAC,IAAI,KAAK,2BAA2B,EAAE,CAAC;QAClD,mBAAmB,CAAC,oBAAoB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACzD,CAAC;IAED,IAAI,OAAO,CAAC,IAAI,KAAK,iBAAiB,EAAE,CAAC;QACxC,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACrD,CAAC;IAED,IAAI,OAAO,CAAC,IAAI,KAAK,qBAAqB,EAAE,CAAC;QAC5C,mBAAmB,CAAC,kBAAkB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,OAAO,CAAC,IAAI,KAAK,mBAAmB,EAAE,CAAC;QAC1C,mBAAmB,CAAC,YAAY,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACjD,CAAC;AACF,CAAC;AAED,eAAe,eAAe,CAAC","sourcesContent":["import { WebsocketMessage } from \"@common/types/http.js\";\r\nimport WebSocket from \"ws\";\r\nimport websocketController from \"../controllers/websocket.js\";\r\n\r\nfunction websocketRouter(this: WebSocket, rawMessage: string) {\r\n\tconst message: WebsocketMessage = JSON.parse(rawMessage);\r\n\tif (message.type === \"wb_user_message\") {\r\n\t\twebsocketController.postMessage(this, message);\r\n\t}\r\n\r\n\tif (message.type === \"wb_user_message_stateless\") {\r\n\t\twebsocketController.postMessageStateless(this, message);\r\n\t}\r\n\r\n\tif (message.type === \"wb_mood_changes\") {\r\n\t\twebsocketController.trackMoodChanges(this, message);\r\n\t}\r\n\r\n\tif (message.type === \"wb_unbiased_opinion\") {\r\n\t\twebsocketController.getUnbiasedOpinion(this, message);\r\n\t}\r\n\r\n\tif (message.type === \"wb_daily_check_in\") {\r\n\t\twebsocketController.dailyCheckIn(this, message);\r\n\t}\r\n}\r\n\r\nexport default websocketRouter;\r\n"]}