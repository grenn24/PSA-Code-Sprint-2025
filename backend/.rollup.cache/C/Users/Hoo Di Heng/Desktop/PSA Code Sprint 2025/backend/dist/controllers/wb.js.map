{"version":3,"file":"wb.js","sourceRoot":"","sources":["../../controllers/wb.ts"],"names":[],"mappings":"AACA,OAAO,QAAQ,MAAM,UAAU,CAAC;AAChC,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AACpD,OAAO,SAAS,MAAM,mBAAmB,CAAC;AAE1C,MAAM,YAAY;IACjB,KAAK,CAAC,kBAAkB,CAAC,OAAgB,EAAE,QAAkB;QAC5D,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC;QAClC,QAAQ;aACN,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,MAAM,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACnE,CAAC;IACD,WAAW,CAAC,OAAO;QAClB,OAAO,KAAK,EACX,OAAgB,EAChB,QAAkB,EAClB,IAAkB,EACjB,EAAE;YACH,IAAI,CAAC;gBACJ,MAAM,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAClC,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACd,yBAAyB;gBACzB,IAAI,GAAG,YAAY,SAAS,EAAE,CAAC;oBAC9B,wBAAwB;oBACxB,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBACzC,OAAO;gBACR,CAAC;qBAAM,IACN,GAAG,YAAY,QAAQ,CAAC,KAAK,CAAC,qBAAqB;oBACnD,GAAG,YAAY,QAAQ,CAAC,KAAK,CAAC,eAAe,EAC5C,CAAC;oBACF,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;oBACpD,OAAO;gBACR,CAAC;qBAAM,CAAC;oBACP,yBAAyB;oBACzB,IAAI,CAAC,GAAG,CAAC,CAAC;gBACX,CAAC;YACF,CAAC;QACF,CAAC,CAAC;IACH,CAAC;CACD;AAED,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;AACxC,eAAe,YAAY,CAAC","sourcesContent":["import { NextFunction, Request, Response } from \"express\";\r\nimport mongoose from \"mongoose\";\r\nimport { HttpError } from \"../middlewares/error.js\";\r\nimport wbService from \"../services/wb.js\";\r\n\r\nclass WBController {\r\n\tasync createConversation(request: Request, response: Response) {\r\n\t\tconst user = response.locals.user;\r\n\t\tresponse\r\n\t\t\t.status(200)\r\n\t\t\t.send(await wbService.createConversation(user.id, request.body));\r\n\t}\r\n\tcatchErrors(handler) {\r\n\t\treturn async (\r\n\t\t\trequest: Request,\r\n\t\t\tresponse: Response,\r\n\t\t\tnext: NextFunction\r\n\t\t) => {\r\n\t\t\ttry {\r\n\t\t\t\tawait handler(request, response);\r\n\t\t\t} catch (err) {\r\n\t\t\t\t// Custom response errors\r\n\t\t\t\tif (err instanceof HttpError) {\r\n\t\t\t\t\t// Custom response error\r\n\t\t\t\t\tresponse.status(err.errorCode).send(err);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else if (\r\n\t\t\t\t\terr instanceof mongoose.Error.DocumentNotFoundError ||\r\n\t\t\t\t\terr instanceof mongoose.Error.ValidationError\r\n\t\t\t\t) {\r\n\t\t\t\t\tresponse.status(400).send({ message: err.message });\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Internal Server Errors\r\n\t\t\t\t\tnext(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\nconst wbController = new WBController();\r\nexport default wbController;\r\n"]}